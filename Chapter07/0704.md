## การใช้ฟังก์ชันในภาษาจาวาสคริปต์

การใช้ฟังก์ชันในภาษาจาวาสคริปต์ผู้พัฒนาสามารถสร้างและประยุกต์ใช้ฟังก์ชันในการทำงานเบื้องต้นได้ ดังนี้

### การสร้างฟังก์ชัน

ฟังก์ชันในภาษาจาวาสคริปต์ที่ผู้ใช้สร้างขึ้นมา มีวัตถุประสงค์เพื่อเขียนส่วนโปรแกรมย่อย โดยทั่วไปถูกสร้างขึ้นมาเพื่อไว้เรียกใช้งานเมื่อเกิดเหตุการณ์ต่าง ๆ บนเว็บ เช่น การคลิก
อิลิเมนท์ในภาษาเอชทีเอ็มแอล เป็นต้น การเขียนฟังก์ชันมีโครงสร้างคำสั่ง ดังนี้

```
function ชื่อฟังก์ชัน(รายการพารามิเตอร์-ถ้ามี) {
     คำสั่งภาษาจาวาสคริปต์;
}
```

จากโครงสร้างคำสั่งข้างต้น สามารถสร้างฟังก์ชันและการเรียกใช้งานฟังก์ชันเมื่อเกิดเหตุการณ์คลิกปุ่มบนเว็บเพจ ดังตัวอย่างโปรแกรม

```
01:<HTML>
02:<HEAD>
03:<TITLE>JavaScript</TITLE>
04:<META charset="UTF-8">
05:<SCRIPT type="text/javascript" type="text/javascript">
06:	    <!--
07:	        function sayHello(name) {
08:	            confirm("สวัสดีครับ คุณ"+name+" ท่านมีอายุมากกว่า 18 ใช่หรือไม่");
09:	        }
10:	        function Redirect() {
11:	            window.location = "http://www.chandra.ac.th";
12:	        }
13:	     //-->
14:	    </SCRIPT>
15:</HEAD>
16:<BODY>
17:<FORM>
18:	    <INPUT type="button" onClick="sayHello('สุรชาติ')" value="สวัสดีครับ">
19:	    <INPUT type="button" onClick="Redirect()" value="ไปยังเว็บไซต์">
20:	    <INPUT type="button" onClick="window.print()" value="ปริ้นท์">  
20:</FORM>  
21:</BODY>
22:</HTML>
```

จากตัวอย่างโปรแกรม ได้มีการเขียนแทรกคำสั่งภาษาจาวาสคริปต์ ในบรรทัดที่ 05-14 โดยได้สร้างฟังก์ชันที่ชื่อว่า sayHello() ในบรรทัดทัดที่ 07-09 เพื่อแจ้งเตือนข้อความว่า “สวัสดีครับ คุณสุรชาติ” โดยคำว่า “สุรชาติ” มาจากค่าตัวแปรชื่อ (name) ที่ฟังก์ชันรับค่ามาใช้งาน ฟังก์ชันนี้จะถูกสั่งให้ทำงานก็ต่อเมื่อมีเหตุการณ์คลิกปุ่ม “สวัสดีครับ” โดยทำงานตามแอตทริบิวต์ onClick="sayHello('สุรชาติ')" (บรรทัดที่ 18) นอกจากนี้ ยังมีการสร้างฟังก์ชันชื่อว่า Redirect() เป็นการสั่งให้เรียกเว็บไซต์ขึ้นมาแสดงผลบนเว็บเบราว์เซอร์ที่เปิดอยู่ด้วยคำสั่ง window.location="http://www.chandra.ac.th"; โดยจะถูกสั่งให้ทำงานเมื่อมีเหตุการณ์คลิกปุ่ม “ไปยังเว็บไซต์” (บรรทัดที่ 19) ส่วนบรรทัดที่ 20 เรียกใช้งานฟังก์ชัน window.print() โดยตรงจากการคลิกปุ่ม “ปริ้นท์” การเรียกใช้งานทั้ง 3 เหตุการณ์ จะได้ผลลัพธ์แสดงตามภาพ

<img src=img/0706.png>

จากโปรแกรม แสดงให้เห็นว่าภาษาจาวาสคริปต์ (JavaScript) สามารถทำงานได้โดยตอบสนองกับเหตุการณ์บนฟอร์ม โดยนอกจากเหตุการณ์คลิก (onClick) แล้วยังสามารถสั่งงานจากเหตุการณ์อื่น ๆ ดังแสดงในตาราง

| เหตุการณ์	| รายละเอียด |
| --- | --- |
| onAbort	| เกิดเมื่อผู้ใช้ขัดจังหวะการทำงานของโปรแกรม |
| onBlur	| เกิดเมื่อออบเจ็คเป้าหมายสูญเสียการโฟกัส |
| onChange	| เกิดเมื่อออบเจ็คเป้าหมายถูกเปลี่ยนค่า |
| onClick	| เกิดเมื่อออบเจ็คเป้าหมายถูกคลิก |
| onDbClick	| เกิดเมื่อออบเจ็คเป้าหมายถูกดัลเบิ้ลคลิก |
| OnDragDrop	| เกิดเมื่อมีการคลิกแล้วลากออบเจ็คเป้าหมายไปปล่อยบนพื้นของวินโดวส์ |
| onError	| เกิดเมื่อออบเจ็คเป้าหมายเกิดข้อผิดพลาดใด ๆ |
| onFocus	| เกิดเมื่อออบเจ็คเป้าหมายกลับมาพร้อมใช้งาน |
| onKeydown	| เกิดเมื่อมีการกดแป้นพิมพ์พิมพ์ข้อความใด ๆ ลงในฟอร์ม |
| oKeyPress	| เกิดขณะการกดปุ่มแป้นพิมพ์คีย์บอร์ดใด ๆ |
| onKeyUp	| เกิดขณะปล่อยปุ่มเมื่อกดแป้นพิมพ์แล้ว |
| onLoad	| เกิดขึ้นเดียวขณะออบเจ็คเป้าถูกโหลด |
| onUnLoad	| เกิดขึ้นเดียวขณะออบเจ็คเป้าถูกอัลโหลด |
| onMouseDown	| เกิดขณะคลิกเม้าส์ที่ออบเจ็คเป้าหมาย |
| onMouseMove	| เกิดขณะเลื่อนเม้าส์เข้าสู่พื้นที่ออบเจ็คเป้าหมาย |
| onMouseOut	| เกิดขณะเลื่อนเม้าส์ออกจากพื้นที่ออบเจ็คเป้าหมาย |
| onMouseOver	| เกิดขณะเลื่อนมีการเลื่อนเม้าส์เหนือหรือทับออบเจ็คเป้าหมาย |
| onMouseUp	| เกิดขณะปล่อยเม้าส์จากการคลิกออบเจ็คเป้าหมาย |
| onMove	| เกิดเมื่อมีการย้ายวินโดวส์หรือเฟรมของออบเจ็ค |
| onReset	| เกิดเมื่อมีการสั่งให้รีเซตฟอร์ม (ทั่วไป เกิดจากการกดปุ่มรีเซต) |
| onResize	| เกิดเมื่อมีการเปลี่ยนแปลงขนาดของวินโดวส์ |
| onSelect	| เกิดเมื่อมีการเลือกข้อความบางส่วนหรือทั้งหมดในอิลิเมนท์ของข้อความ |
| onSubmit	| เกิดเมื่อมีการสั่งให้ส่งค่าฟอร์ม (ทั่วไป เกิดจากการกดปุ่มส่งค่า) |

### การประยุกต์ใช้ภาษาจาวาสคริปต์ในการตรวจสอบค่าบนฟอร์ม
ภาษาจาวาสคริปต์เป็นภาษาที่นิยมนำไปใช้ในการตรวจสอบค่าบนฟอร์ม เช่นการตรวจสอบการกรอกข้อมูลที่ไม่สูมบรณ์ครบถ้วนของผู้ใช้งาน ในที่นี้จะขอยกตัวอย่างการตรวจสอบค่าว่างบนฟอร์ม แสดงตามตัวอย่างโปรแกรม

```
01:<HTML>
02:<HEAD>
03:<TITLE>JavaScript</TITLE>
04:<META charset="UTF-8">
05:<SCRIPT type="text/javascript" type="text/javascript">
06:	<!--
07:	 function chkSubmit() {
08:	    if(document.frmForm.txtName.value == ""){
09:	      alert('กรุณาป้อนข้อมูล username');
10:	      document.frmForm.txtName.focus();
11:	      return false;
12:	    }
13:	    if(document.frmForm.txtPassword.value == ""){
14:	      alert('กรุณาป้อนข้อมูล password');
15:	      document.frmForm.txtPassword.focus();
16:	      return false;
17:	    }
18:	    document.frmForm.submit();
19:	 }
20:	//-->
21:</SCRIPT>
22:</HEAD>
23:<BODY>
24:<FORM name = "frmForm" id = "frmForm" method = "post" 
25:	           onSubmit="JavaScript: return chkSubmit();" action = "main.html">
26:	   username: <INPUT name="txtName" id = "txtName"  type="text"><BR>  
27:	   password: <INPUT name="txtPassword" id="txtPassword" type="password">
28:	   <BR><INPUT type="submit" value="เข้าสู่ระบบ">
29:</FORM> 
30:</BODY>
31:</HTML>
```

จากตัวอย่างโปรแกรม บรรทัดที่ 5-21 ได้เขียนแทรกคำสั่งภาษาจาวาสคริปต์ โดยใช้ฟังก์ชัน chkSubmit() เพื่อใช้สำหรับรับและตรวจสอบค่าว่างของอิลิเมนท์บนฟอร์ม ประกอบด้วย การตรวจสอบค่าชื่อผู้ใช้ (txtName) (บรรทัดที่ 08-12) และ การตรวจสอบค่ารหัสผ่าน (txtPassword) (บรรทัดที่ 13-17) ซึ่งหากเป็นค่าว่างจะสั่งให้ไปรับค่าที่ตำแหน่งอินพุตข้อมูลนั้นใหม่ แต่หากมีค่าครบถ้วนสมบูรณ์ทั้ง 2 ค่า จะสั่งให้ดำเนินการเหตุการณ์ submit() เพื่อส่งข้อมูลผ่านฟอร์มต่อไปยังหน้าตามแอตทริบิวต์ action ของฟอร์มต่อไป (บรรทัดที่ 18) สำหรับในส่วนของการออกแบบฟอร์ม ในบรรทัดที่ 24-29 มีการวางอินพุตข้อความเพื่อรับค่าชื่อผู้ใช้ (username) กับ รหัสผ่าน (password) และปุ่มส่งค่าฟอร์ม โดยในแท็กฟอร์มจะระบุแอตทริบิวต์ชื่อ onSubmit="JavaScript: return chkSubmit()" เพื่อเรียกฟังก์ชันจาวาสคริปต์ chkSubmit() เมื่อเกิดเหตุการณ์กดปุ่มส่งค่าฟอร์ม ถ้าในกรณีถ้าชื่อผู้ใช้ว่างจะได้ผลลัพธ์เป็นไปตามภาพ

<img src=img/0707.png>

---
#### [<< หน้าก่อนหน้า](0703.md) | [หน้าเลือกหัวข้อ](README.md) | [หน้าต่อไป >>](0705.md)
---
